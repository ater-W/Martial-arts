<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>武术视频播放 — 咏春 / 太极拳 / 泰拳</title>
    <style>
        :root{
            --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#9aa6b2;
        }
        *{box-sizing:border-box}
        body{
            margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
            background:linear-gradient(180deg,#071124 0%, #0b1520 100%); color:#e6eef6;
            min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
        }
        .container{
            width:100%; max-width:1000px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
            border:1px solid rgba(255,255,255,0.03); padding:18px; border-radius:12px; box-shadow:0 10px 30px rgba(2,6,23,0.6);
            display:grid; grid-template-columns: 1fr 320px; gap:18px;
        }
        header{grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; gap:12px}
        h1{font-size:18px; margin:0}
        .player{
            background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
            border-radius:10px; padding:10px; display:flex; flex-direction:column; gap:10px;
        }
        video{width:100%; height:auto; border-radius:8px; background:#000}
        .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
        select, button, input[type="range"]{
            background:transparent; color:var(--accent); border:1px solid rgba(255,255,255,0.06);
            padding:6px 10px; border-radius:8px; outline:none;
        }
        button{cursor:pointer}
        .playlist{
            background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
            border-radius:10px; padding:12px; height:100%; overflow:auto;
        }
        .item{padding:10px; border-radius:8px; margin-bottom:8px; cursor:pointer; border:1px solid rgba(255,255,255,0.02)}
        .item.active{box-shadow: inset 0 0 0 2px rgba(6,182,212,0.12); border-color:rgba(6,182,212,0.12)}
        .desc{color:var(--muted); font-size:13px; margin-top:6px}
        footer{grid-column:1/-1; font-size:12px; color:var(--muted); margin-top:6px}
        @media (max-width:880px){ .container{grid-template-columns:1fr; } .playlist{order:2} }
    </style>
</head>
<body>
    <div class="container" role="main">
        <header>
            <h1>武术教学视频</h1>
            <div style="color:var(--muted);font-size:13px">请选择一个流派开始观看</div>
        </header>

        <section class="player" aria-label="视频播放器">
            <video id="video" controls preload="metadata" poster="" crossorigin="anonymous">
                <source id="source" src="" type="video/mp4">
                您的浏览器不支持 video 标签。请使用支持 HTML5 的浏览器。
            </video>

            <div class="controls" aria-hidden="false">
                <label for="styleSelect" style="color:var(--muted);font-size:13px">流派：</label>
                <select id="styleSelect" aria-label="选择武术流派">
                    <option value="">请选择...</option>
                </select>

                <button id="playBtn" title="播放/暂停">播放</button>
                <button id="restartBtn" title="从头开始">重播</button>

                <label style="color:var(--muted);font-size:13px">倍速</label>
                <input id="speed" type="range" min="0.5" max="2" step="0.25" value="1" style="width:110px"/>

                <a id="download" style="margin-left:auto;color:var(--muted);font-size:13px" download>下载</a>
            </div>

            <div id="info" style="font-size:13px;color:var(--muted)"></div>
        </section>

        <aside class="playlist" aria-label="播放列表">
            <div style="font-weight:600;margin-bottom:8px">可选视频</div>
            <!-- 列表项由脚本生成 -->
            <div id="list"></div>
        </aside>

        <footer>提示：示例中使用本地/占位视频路径。请将 videos/ 文件夹放在同级目录并替换为真实视频（如 MP4）。</footer>
    </div>

    <script>
        // 视频资源配置：替换 src/poster/caption 为你自己的文件路径
        const library = [
            {
                id: 'wingchun',
                title: '咏春基础演示',
                style: '咏春',
                src: 'videos/wingchun.mp4',
                poster: 'images/guixiaolong.png',
                desc: '咏春基本步法与连招练习，适合入门与日常训练。',
            },
            {
                id: 'taichi',
                title: '太极拳套路',
                style: '太极拳',
                src: 'videos/taichi.mp4',
                poster: 'images/guixiaolong.png',
                desc: '慢练太极拳推手与套路解析，注重呼吸与放松。',
            },
            {
                id: 'muaythai',
                title: '泰拳训练课程',
                style: '泰拳',
                src: 'videos/muaythai.mp4',
                poster: 'images/guixiaolong.png',
                desc: '泰拳打击训练，包含踢、肘、膝的组合练习。',
            }
        ];

        const video = document.getElementById('video');
        const source = document.getElementById('source');
        const styleSelect = document.getElementById('styleSelect');
        const listEl = document.getElementById('list');
        const info = document.getElementById('info');
        const playBtn = document.getElementById('playBtn');
        const restartBtn = document.getElementById('restartBtn');
        const speed = document.getElementById('speed');
        const download = document.getElementById('download');

        function populate() {
            // dropdown with unique styles
            const styles = Array.from(new Set(library.map(i=>i.style)));
            styles.forEach(s => {
                const opt = document.createElement('option');
                opt.value = s; opt.textContent = s;
                styleSelect.appendChild(opt);
            });

            // playlist items
            library.forEach(item => {
                const div = document.createElement('div');
                div.className = 'item';
                div.dataset.id = item.id;
                div.innerHTML = `<strong>${item.title}</strong><div class="desc">${item.style} · ${item.desc}</div>`;
                div.addEventListener('click', ()=>loadItem(item.id, true));
                listEl.appendChild(div);
            });
        }

        function setActive(id){
            document.querySelectorAll('.item').forEach(el=>{
                el.classList.toggle('active', el.dataset.id === id);
            });
        }

        function loadItem(id, autoplay=false){
            const item = library.find(x=>x.id===id);
            if(!item) return;
            source.src = item.src;
            // remove existing tracks
            Array.from(video.querySelectorAll('track')).forEach(t=>t.remove());
            if(item.caption){
                const track = document.createElement('track');
                track.kind = 'subtitles'; track.label = '中文'; track.srclang = 'zh';
                track.src = item.caption; track.default = true;
                video.appendChild(track);
            }
            video.poster = item.poster || '';
            video.load();
            setActive(id);
            info.textContent = `${item.title} — ${item.desc}`;
            download.href = item.src; download.textContent = '下载视频';
            if(autoplay){ video.play().catch(()=>{}); playBtn.textContent = '暂停'; }
        }

        styleSelect.addEventListener('change', ()=>{
            const style = styleSelect.value;
            if(!style) return;
            // 自动选择该流派下第一个视频
            const item = library.find(i=>i.style===style);
            if(item) loadItem(item.id, true);
        });

        playBtn.addEventListener('click', ()=>{
            if(video.paused){ video.play(); playBtn.textContent = '暂停'; }
            else { video.pause(); playBtn.textContent = '播放'; }
        });
        video.addEventListener('play', ()=> playBtn.textContent = '暂停');
        video.addEventListener('pause', ()=> playBtn.textContent = '播放');

        restartBtn.addEventListener('click', ()=>{ video.currentTime = 0; video.play(); });

        speed.addEventListener('input', ()=>{ video.playbackRate = parseFloat(speed.value); });

        // 初始化
        populate();
        // 自动加载第一个视频作为示例（可删除）
        if(library[0]) loadItem(library[0].id, false);
    </script>
</body>
</html>